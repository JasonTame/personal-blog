---
title: 'Getting started with PestPHP'
author:
  - 5761106b-2220-429b-b49a-5e42cc8df619
updated_by: 5761106b-2220-429b-b49a-5e42cc8df619
updated_at: 1600605793
code: |
  # Intro
  
  Pest is a testing framework built on PHPUnit. According to the createor it was "carefully crafted to bring the joy of testing to PHP".
  
  It cuts out a lot of boilerplate that you'd generally need to write when testing with PHPUnit and instead lets you focus on the tests themselves. 
  
  Benefits:
  
  - 1 Great test reporting
  - 2 It's super easy to write and read Pest tests
  - 3 Much less boilerplate
  
  
  TODO: Discuss my own journey with testing and how I learned to test right as PestPHP was released
  
  ## Installation
  
  [Link to official install docs
  ](https://pestphp.com/docs/installation/)
  As mentioned, Pest is built on top of PHPUnit, so the first step is to make sure you have a phpunit.xml file at the project root. If you are using Laravel, it usually comes with one in a standard installation. Otherwise, here's [a link to one](https://github.com/pestphp/pest/blob/master/stubs/Laravel/phpunit.xml) on the pest repo
  
  Next, make sure your PHPUnit dependency is ^9.0
  
  ```
  composer require phpunit/phpunit:"^9.0" --dev --update-with-dependencies
  ```
  
  If you are using Laravel, require Collision ^5.0
  
  ```
  composer require nunomaduro/collision:"^5.0" --dev --update-with-dependencies
  ```
  
  **Note:** Collision 5.0 requires Laravel 8.0 or above. If you are on an older version, skip this step. You can still run PestPHP if you are on an older version of Laravel, but you will have to call it with `./vendor/bin/pest` rather than `php artisan test`.
  
  ## Converting PHPUnit tests to Pest tests
  
  Let's walk through the process of converting existing PHPUnit tests to Pest tests. Here's the test we'll change:
  
  ```php
  <?php
  
  namespace Tests\Unit;
  
  use Tests\TestCase;
  use Illuminate\Foundation\Testing\RefreshDatabase;
  
  class ArticlesTest extends TestCase
  <?php
  
  use App\Traits\WithAccessToken;
  use Laravel\Lumen\Testing\DatabaseMigrations;
  
  class SubscriptionsTest extends TestCase
  {
      use DatabaseMigrations;
      use WithAccessToken;
  
      /**
       * @test 
       */
      public function viewAllSubscriptions()
      {
          factory("App\Subscription")->create();
          $this->get('/api/subscriptions', $this->getHeader())->seeJsonStructure([
              '*' => [
                  'user_id',
                  'premium',
                  'type',
                  'cohort_ids',
                  'paid'
              ]
          ]);
      }
  
      /**
       * @test 
       */
      public function viewSingleSubscription()
      {
          $subscription_type = ['type' => 'Test Subscription'];
  
          $subscription = factory('App\Subscription')->create($subscription_type);
  
          $this->get('/api/subscriptions/' . $subscription->id, $this->getHeader())->seeJsonContains($subscription_type);
      }
  
      /**
       * @test 
       */
      public function addSubscription()
      {
          $subscription_data = [
              'user_id' => "user_11111",
              'premium' => false,
              'type' => 'Test Subscription',
              'cohort_ids' => '97,98,99',
              'paid' => true
          ];
  
          $this->post('/api/subscriptions', $subscription_data, $this->getHeader())->seeJsonContains($subscription_data);
      }
  
      /**
       * @test 
       */
      public function editSubscription()
      {
          $subscription_data = [
              'user_id' => "user_11111",
              'premium' => false,
              'type' => 'Test Subscription',
              'cohort_ids' => '97,98,99',
              'paid' => true
          ];
  
          $subscription = factory('App\Subscription')->create();
  
          $this->put('/api/subscriptions/' . $subscription->id, $subscription_data, $this->getHeader())->seeJsonContains($subscription_data);
      }
  
      /**
       * @test 
       */
      public function deleteSubscription()
      {
          $subscription = factory('App\Subscription')->create();
          $this->delete('/api/subscriptions/' . $subscription->id, [], $this->getHeader())->seeStatusCode(200);
  
      }
  }
  
id: 64fe190b-cd3c-438d-89ff-8eaa0983e74a
published: false
---
# Intro

Pest is a testing framework built on PHPUnit. According to the createor it was "carefully crafted to bring the joy of testing to PHP".

It cuts out a lot of boilerplate that you'd generally need to write when testing with PHPUnit and instead lets you focus on the tests themselves. 

Benefits:

- 1 Great test reporting
- 2 It's super easy to write and read Pest tests
- 3 Much less boilerplate


TODO: Discuss my own journey with testing and how I learned to test right as PestPHP was released

## Installation

[Link to official install docs
](https://pestphp.com/docs/installation/)
As mentioned, Pest is built on top of PHPUnit, so the first step is to make sure you have a phpunit.xml file at the project root. If you are using Laravel, it usually comes with one in a standard installation. Otherwise, here's [a link to one](https://github.com/pestphp/pest/blob/master/stubs/Laravel/phpunit.xml) on the pest repo

Next, make sure your PHPUnit dependency is ^9.0

```
composer require phpunit/phpunit:"^9.0" --dev --update-with-dependencies
```

If you are using Laravel, require Collision ^5.0

```
composer require nunomaduro/collision:"^5.0" --dev --update-with-dependencies
```

**Note:** Collision 5.0 requires Laravel 8.0 or above. If you are on an older version, skip this step. You can still run PestPHP if you are on an older version of Laravel, but you will have to call it with `./vendor/bin/pest` rather than `php artisan test`.

## Converting PHPUnit tests to Pest tests

Let's walk through the process of converting existing PHPUnit tests to Pest tests. Here's the test we'll change:

```php
<?php

namespace Tests\Unit;

use Tests\TestCase;
use Illuminate\Foundation\Testing\RefreshDatabase;

class ArticlesTest extends TestCase
<?php

use App\Traits\WithAccessToken;
use Laravel\Lumen\Testing\DatabaseMigrations;

class SubscriptionsTest extends TestCase
{
    use DatabaseMigrations;
    use WithAccessToken;

    /**
     * @test 
     */
    public function viewAllSubscriptions()
    {
        factory("App\Subscription")->create();
        $this->get('/api/subscriptions', $this->getHeader())->seeJsonStructure([
            '*' => [
                'user_id',
                'premium',
                'type',
                'cohort_ids',
                'paid'
            ]
        ]);
    }

    /**
     * @test 
     */
    public function viewSingleSubscription()
    {
        $subscription_type = ['type' => 'Test Subscription'];

        $subscription = factory('App\Subscription')
          ->create($subscription_type);

        $this->get(
          '/api/subscriptions/' . $subscription->id, 
          $this->getHeader())
          	->seeJsonContains($subscription_type);
    }

    /**
     * @test 
     */
    public function addSubscription()
    {
        $subscription_data = [
            'user_id' => "user_11111",
            'premium' => false,
            'type' => 'Test Subscription',
            'cohort_ids' => '97,98,99',
            'paid' => true
        ];

        $this->post(
          '/api/subscriptions', 
          $subscription_data, 
          $this
          	->getHeader())
          	->seeJsonContains($subscription_data);
    }

    /**
     * @test 
     */
    public function editSubscription()
    {
        $subscription_data = [
            'user_id' => "user_11111",
            'premium' => false,
            'type' => 'Test Subscription',
            'cohort_ids' => '97,98,99',
            'paid' => true
        ];

        $subscription = factory('App\Subscription')->create();

        $this->put(
          '/api/subscriptions/' . $subscription->id, 
          $subscription_data, 
          $this
          	->getHeader())
          	->seeJsonContains($subscription_data);
    }

    /**
     * @test 
     */
    public function deleteSubscription()
    {
        $subscription = factory('App\Subscription')->create();
        $this->delete(
          '/api/subscriptions/' . 
          $subscription->id, 
          [], 
          $this
          	->getHeader())
          	->seeStatusCode(200);
    }
}